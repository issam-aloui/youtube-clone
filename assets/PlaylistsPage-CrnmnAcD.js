import{r as d,u as z,R as H,j as t,B as s,T as n,F as w,a as I,g as T}from"./index-CDy_V-20.js";import{b as V,I as k,S as E}from"./formatters-1D1gjGA3.js";import{a as L}from"./videoDataLoader-DEmUlEPW.js";import{d as S}from"./data_fetch-iKpRAcz_.js";import{H as R}from"./heading-DNVwJvTQ.js";import{S as B}from"./simple-grid-C-ASrvJ8.js";const F=({id:l,title:f,status:m,lastTimeUpdate:u,videoIds:a,thumbnail:r,description:g,onClick:y})=>{const[e,i]=d.useState(!1),[c,j]=d.useState(null),x=V(),o=z();H.useEffect(()=>{if(!r&&a&&a.length>0){const v=a[0];L(v).then(b=>{b&&b.thumbnail&&j(b.thumbnail)})}},[r,a]);const h=r||c,p=a?a.length:0,P=v=>{v.stopPropagation(),o(`/playlist?id=${l}`)},C=()=>{p>0?y(l):o(`/playlist?id=${l}`)};return t.jsxs(s,{cursor:"pointer",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onClick:C,transition:"all 0.2s ease",transform:e?"translateY(-2px)":"translateY(0)",_hover:{"& .playlist-thumbnail":{transform:"scale(1.05)"}},children:[t.jsxs(s,{className:"playlist-thumbnail",position:"relative",w:"full",aspectRatio:"16/9",borderRadius:"12px",overflow:"hidden",mb:"12px",bg:"gray.700",transition:"transform 0.3s ease",children:[h?t.jsx(k,{src:h,alt:f,w:"full",h:"full",objectFit:"cover"}):t.jsx(s,{w:"full",h:"full",bg:"gray.600",display:"flex",alignItems:"center",justifyContent:"center",children:t.jsx(n,{color:"gray.400",fontSize:"14px",children:"No thumbnail"})}),t.jsxs(s,{position:"absolute",bottom:"8px",right:"8px",bg:"rgba(0, 0, 0, 0.85)",color:"white",px:"8px",py:"4px",borderRadius:"6px",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px",children:[t.jsx(s,{as:"svg",width:"12px",height:"12px",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M22 7H2v1h20V7zm-9 5H2v-1h11v1zm0 4H2v-1h11v1zm2 3H2v-1h13v1zm0-4H2v-1h13v1zm8-3.5L19 14v-4l4-2.5z"})}),p]}),e&&p>0&&t.jsxs(s,{position:"absolute",bottom:"8px",left:"8px",bg:"rgba(0, 0, 0, 0.85)",color:"white",px:"12px",py:"6px",borderRadius:"6px",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease",opacity:e?1:0,children:[t.jsx(s,{as:"svg",width:"14px",height:"14px",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M8 5v14l11-7z"})}),"Play all"]}),e&&p===0&&t.jsx(s,{position:"absolute",bottom:"8px",left:"8px",bg:"rgba(0, 0, 0, 0.85)",color:"gray.400",px:"12px",py:"6px",borderRadius:"6px",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s ease",opacity:e?1:0,children:"No videos"})]}),t.jsxs(s,{children:[t.jsx(n,{fontSize:"16px",fontWeight:"600",color:"white",lineHeight:"22px",noOfLines:2,mb:"4px",transition:"color 0.2s ease",_hover:{color:"#aaaaaa"},children:f}),t.jsx(n,{fontSize:"14px",color:"#aaaaaa",mb:"2px",textTransform:"capitalize",children:m}),t.jsx(n,{fontSize:"14px",color:"#aaaaaa",mb:"4px",children:x(u)}),t.jsx(n,{fontSize:"14px",color:"#3ea6ff",cursor:"pointer",onClick:P,_hover:{textDecoration:"underline"},children:"View full playlist"})]})]})};function _(){const[l,f]=d.useState([]),[m,u]=d.useState(!0),[a,r]=d.useState(null),g=z();d.useEffect(()=>{(async()=>{try{u(!0),r(null);const i=await S("/data/playlists/index.json"),j=(await Promise.all(i.map(async x=>{try{const o=await S(`/data/playlists/${x}.json`);let h=o.videoIds;o.isDynamic&&x==="liked-videos"&&(h=T());const p=[...new Set(h)];return{...o,videoIds:p}}catch(o){return console.error(`Error loading playlist ${x}:`,o),null}}))).filter(Boolean);f(j)}catch(i){console.error("Error loading playlists:",i),r("Failed to load playlists")}finally{u(!1)}})()},[]);const y=e=>{const i=l.find(c=>c.id===e);if(i&&i.videoIds&&i.videoIds.length>0){const c=i.videoIds[0];g(`/watch/${c}?playlist=${e}`)}else g(`/playlist?id=${e}`)};return a?t.jsx(s,{h:"full",w:"full",overflowY:"auto",p:"20px",children:t.jsxs(w,{justify:"center",align:"center",minH:"50vh",direction:"column",gap:"16px",children:[t.jsx(n,{color:"red.400",fontSize:"18px",children:a}),t.jsx(I,{colorScheme:"red",variant:"outline",onClick:()=>window.location.reload(),children:"Try Again"})]})}):t.jsxs(s,{h:"full",w:"full",overflowY:"auto",p:"20px",children:[t.jsx(s,{mb:"32px",children:t.jsx(R,{as:"h1",size:"2xl",color:"white",fontSize:{base:"28px",md:"36px"},fontWeight:"400",mb:"24px",children:"Playlists"})}),m?t.jsx(E,{color:"white",thickness:"3px",text:"Loading playlists...",textColor:"white"}):l.length===0?t.jsx(w,{justify:"center",align:"center",minH:"50vh",direction:"column",gap:"16px",children:t.jsx(n,{color:"gray.400",fontSize:"18px",children:"No playlists found"})}):t.jsx(B,{columns:{base:1,sm:1,md:2,lg:3,xl:4},spacing:"20px",gap:4,w:"full",children:l.map(e=>t.jsx(F,{id:e.id,title:e.title,status:e.status,lastTimeUpdate:e.lastTimeUpdate,videoIds:e.videoIds,thumbnail:e.thumbnail,description:e.description,onClick:y},e.id))})]})}export{_ as default};
