import{r as n,f as W,u as L,j as e,F as c,T as l,a as v,B as t,V as R,g as E}from"./index-CDy_V-20.js";import{d as N}from"./data_fetch-iKpRAcz_.js";import{a as $}from"./videoDataLoader-DEmUlEPW.js";import{b as A,a as _,u as M,S as U,I as w}from"./formatters-1D1gjGA3.js";function Q(){const[s,S]=n.useState(null),[o,z]=n.useState([]),[P,V]=n.useState(null),[I,f]=n.useState(!0),[u,d]=n.useState(null),[k]=W(),p=L(),g=A(),C=_(),D=M(),r=k.get("id");n.useEffect(()=>{(async()=>{try{if(f(!0),d(null),!r){d("No playlist ID provided");return}const a=await N(`/data/playlists/${r}.json`);if(a){let y=a.videoIds;a.isDynamic&&r==="liked-videos"&&(y=E());const h=[...new Set(y)],F={...a,videoIds:h,videoCount:h.length};S(F);const x=(await Promise.all(h.map(async(j,B)=>{try{return{...await $(j),playlistIndex:B+1}}catch(b){return console.error(`Error loading video ${j}:`,b),null}}))).filter(Boolean);z(x),!a.thumbnail&&x.length>0&&V(x[0].thumbnail)}}catch(a){console.error("Error loading playlist:",a),d("Failed to load playlist")}finally{f(!1)}})()},[r]);const H=i=>{p(`/watch/${i}?playlist=${r}`)},T=()=>{o.length>0&&p(`/watch/${o[0].id}?playlist=${r}`)};if(I)return e.jsx(U,{color:"white",thickness:"3px",fullHeight:!0,text:"Loading playlist...",textColor:"white"});if(u||!s)return e.jsxs(c,{justify:"center",align:"center",minH:"50vh",direction:"column",gap:"16px",children:[e.jsx(l,{color:"red.400",fontSize:"18px",children:u||"Playlist not found"}),e.jsx(v,{colorScheme:"red",variant:"outline",onClick:()=>p("/playlists"),children:"Back to Playlists"})]});const m=s.thumbnail||P;return e.jsxs(c,{direction:"row",h:"full",w:"full",p:"20px",gap:"20px",children:[e.jsx(t,{w:"33%",flexShrink:0,children:e.jsxs(t,{bg:"#0f0f0f",borderRadius:"12px",overflow:"hidden",border:"1px solid #323232",children:[e.jsxs(t,{position:"relative",w:"100%",aspectRatio:"16/9",bg:"gray.700",children:[m?e.jsx(w,{src:m,alt:s.title,w:"full",h:"full",objectFit:"cover"}):e.jsx(t,{w:"full",h:"full",bg:"gray.600",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(l,{color:"gray.400",fontSize:"16px",children:"No thumbnail"})}),e.jsxs(t,{position:"absolute",bottom:"12px",right:"12px",bg:"rgba(0, 0, 0, 0.85)",color:"white",px:"12px",py:"6px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",children:[e.jsx(t,{as:"svg",width:"16px",height:"16px",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M22 7H2v1h20V7zm-9 5H2v-1h11v1zm0 4H2v-1h11v1zm2 3H2v-1h13v1zm0-4H2v-1h13v1zm8-3.5L19 14v-4l4-2.5z"})}),s.videoCount," videos"]})]}),e.jsxs(t,{p:"20px",children:[e.jsx(l,{fontSize:"24px",fontWeight:"600",color:"white",lineHeight:"1.3",mb:"12px",children:s.title}),e.jsxs(l,{fontSize:"16px",color:"#aaaaaa",mb:"8px",textTransform:"capitalize",fontWeight:"500",children:[s.status," playlist"]}),e.jsxs(l,{fontSize:"14px",color:"#aaaaaa",mb:"16px",children:["Updated ",g(s.lastTimeUpdate)]}),e.jsx(l,{fontSize:"14px",color:"#cccccc",lineHeight:"1.5",mb:"20px",whiteSpace:"pre-wrap",children:s.description}),e.jsx(v,{colorScheme:"red",size:"lg",w:"full",leftIcon:e.jsx(t,{as:"svg",width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M8 5v14l11-7z"})}),onClick:T,isDisabled:o.length===0,children:o.length===0?"No videos":"Play all"})]})]})}),e.jsx(t,{w:"66%",flex:"1",children:o.length===0?e.jsxs(c,{justify:"center",align:"center",h:"full",direction:"column",gap:"16px",children:[e.jsx(l,{color:"gray.400",fontSize:"18px",children:"This playlist is empty"}),e.jsx(l,{color:"gray.500",fontSize:"14px",children:"No videos have been added to this playlist yet."})]}):e.jsx(R,{spacing:"0",align:"stretch",children:o.map((i,a)=>e.jsxs(c,{p:"12px",cursor:"pointer",borderRadius:"8px",_hover:{bg:"#1f1f1f"},onClick:()=>H(i.id),gap:"12px",children:[e.jsx(t,{minW:"24px",pt:"4px",children:e.jsx(l,{fontSize:"14px",color:"#aaaaaa",fontWeight:"500",textAlign:"center",children:a+1})}),e.jsxs(t,{position:"relative",w:"168px",h:"94px",borderRadius:"8px",overflow:"hidden",flexShrink:0,children:[e.jsx(w,{src:i.thumbnail,alt:i.title,w:"full",h:"full",objectFit:"cover"}),e.jsx(t,{position:"absolute",bottom:"4px",right:"4px",bg:"rgba(0, 0, 0, 0.8)",color:"white",px:"4px",py:"2px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",children:C(i.duration)})]}),e.jsxs(t,{flex:"1",minW:"0",children:[e.jsx(l,{fontSize:"16px",fontWeight:"500",color:"white",lineHeight:"1.4",noOfLines:2,mb:"4px",_hover:{color:"#aaaaaa"},children:i.title}),e.jsx(l,{fontSize:"14px",color:"#aaaaaa",mb:"2px",children:i.channelName}),e.jsxs(l,{fontSize:"14px",color:"#aaaaaa",children:[D(i.views)," views â€¢"," ",g(i.uploadDate)]})]})]},i.id))})})]})}export{Q as default};
