import{r as n,h as W,u as L,j as e,F as c,T as a,a as b,B as t,V as N,b as R}from"./index-D3w7qsLg.js";import{d as E}from"./data_fetch-aBz1sAwe.js";import{a as $}from"./videoDataLoader-BZaTkg2Q.js";import{b as A,a as _,u as M,S as O,I as w}from"./formatters-B9676DKi.js";function Q(){const[s,S]=n.useState(null),[r,z]=n.useState([]),[V,I]=n.useState(null),[P,g]=n.useState(!0),[m,d]=n.useState(null),[k]=W(),p=L(),y=A(),D=_(),C=M(),o=k.get("id");n.useEffect(()=>{(async()=>{try{if(g(!0),d(null),!o){d("No playlist ID provided");return}const l=await E(`/data/playlists/${o}.json`);if(l){let h=l.videoIds;l.isDynamic&&o==="liked-videos"?h=R():l.isDynamic&&o==="watch-later"&&(h=JSON.parse(localStorage.getItem("youtube-saved-videos")||"[]"));const x=[...new Set(h)],F={...l,videoIds:x,videoCount:x.length};S(F);const f=(await Promise.all(x.map(async(u,B)=>{try{return{...await $(u),playlistIndex:B+1}}catch(v){return console.error(`Error loading video ${u}:`,v),null}}))).filter(Boolean);z(f),!l.thumbnail&&f.length>0&&I(f[0].thumbnail)}}catch(l){console.error("Error loading playlist:",l),d("Failed to load playlist")}finally{g(!1)}})()},[o]);const H=i=>{p(`/watch/${i}?playlist=${o}`)},T=()=>{r.length>0&&p(`/watch/${r[0].id}?playlist=${o}`)};if(P)return e.jsx(O,{color:"white",thickness:"3px",fullHeight:!0,text:"Loading playlist...",textColor:"white"});if(m||!s)return e.jsxs(c,{justify:"center",align:"center",minH:"50vh",direction:"column",gap:"16px",children:[e.jsx(a,{color:"red.400",fontSize:"18px",children:m||"Playlist not found"}),e.jsx(b,{colorScheme:"red",variant:"outline",onClick:()=>p("/playlists"),children:"Back to Playlists"})]});const j=s.thumbnail||V;return e.jsxs(c,{direction:"row",h:"full",w:"full",p:"20px",gap:"20px",children:[e.jsx(t,{w:"33%",flexShrink:0,children:e.jsxs(t,{bg:"#0f0f0f",borderRadius:"12px",overflow:"hidden",border:"1px solid #323232",children:[e.jsxs(t,{position:"relative",w:"100%",aspectRatio:"16/9",bg:"gray.700",children:[j?e.jsx(w,{src:j,alt:s.title,w:"full",h:"full",objectFit:"cover"}):e.jsx(t,{w:"full",h:"full",bg:"gray.600",display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(a,{color:"gray.400",fontSize:"16px",children:"No thumbnail"})}),e.jsxs(t,{position:"absolute",bottom:"12px",right:"12px",bg:"rgba(0, 0, 0, 0.85)",color:"white",px:"12px",py:"6px",borderRadius:"8px",fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",children:[e.jsx(t,{as:"svg",width:"16px",height:"16px",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M22 7H2v1h20V7zm-9 5H2v-1h11v1zm0 4H2v-1h11v1zm2 3H2v-1h13v1zm0-4H2v-1h13v1zm8-3.5L19 14v-4l4-2.5z"})}),s.videoCount," videos"]})]}),e.jsxs(t,{p:"20px",children:[e.jsx(a,{fontSize:"24px",fontWeight:"600",color:"white",lineHeight:"1.3",mb:"12px",children:s.title}),e.jsxs(a,{fontSize:"16px",color:"#aaaaaa",mb:"8px",textTransform:"capitalize",fontWeight:"500",children:[s.status," playlist"]}),e.jsxs(a,{fontSize:"14px",color:"#aaaaaa",mb:"16px",children:["Updated ",y(s.lastTimeUpdate)]}),e.jsx(a,{fontSize:"14px",color:"#cccccc",lineHeight:"1.5",mb:"20px",whiteSpace:"pre-wrap",children:s.description}),e.jsx(b,{colorScheme:"red",size:"lg",w:"full",leftIcon:e.jsx(t,{as:"svg",width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M8 5v14l11-7z"})}),onClick:T,isDisabled:r.length===0,children:r.length===0?"No videos":"Play all"})]})]})}),e.jsx(t,{w:"66%",flex:"1",children:r.length===0?e.jsxs(c,{justify:"center",align:"center",h:"full",direction:"column",gap:"16px",children:[e.jsx(a,{color:"gray.400",fontSize:"18px",children:"This playlist is empty"}),e.jsx(a,{color:"gray.500",fontSize:"14px",children:"No videos have been added to this playlist yet."})]}):e.jsx(N,{spacing:"0",align:"stretch",children:r.map((i,l)=>e.jsxs(c,{p:"12px",cursor:"pointer",borderRadius:"8px",_hover:{bg:"#1f1f1f"},onClick:()=>H(i.id),gap:"12px",children:[e.jsx(t,{minW:"24px",pt:"4px",children:e.jsx(a,{fontSize:"14px",color:"#aaaaaa",fontWeight:"500",textAlign:"center",children:l+1})}),e.jsxs(t,{position:"relative",w:"168px",h:"94px",borderRadius:"8px",overflow:"hidden",flexShrink:0,children:[e.jsx(w,{src:i.thumbnail,alt:i.title,w:"full",h:"full",objectFit:"cover"}),e.jsx(t,{position:"absolute",bottom:"4px",right:"4px",bg:"rgba(0, 0, 0, 0.8)",color:"white",px:"4px",py:"2px",borderRadius:"4px",fontSize:"12px",fontWeight:"600",children:D(i.duration)})]}),e.jsxs(t,{flex:"1",minW:"0",children:[e.jsx(a,{fontSize:"16px",fontWeight:"500",color:"white",lineHeight:"1.4",noOfLines:2,mb:"4px",_hover:{color:"#aaaaaa"},children:i.title}),e.jsx(a,{fontSize:"14px",color:"#aaaaaa",mb:"2px",children:i.channelName}),e.jsxs(a,{fontSize:"14px",color:"#aaaaaa",children:[C(i.views)," views â€¢"," ",y(i.uploadDate)]})]})]},i.id))})})]})}export{Q as default};
